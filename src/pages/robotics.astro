---
import BaseLayout from "../layouts/BaseLayout.astro";
import ContactCTA from "../components/ContactCTA.astro";
import Hero from "../components/Hero.astro";
import {
    contestData,
    educationData,
    certificateData, 
    algorithmContestData,
    problemCreationData,
    OnlineJudgeProfile,
} from "../data/about";
import "../styles/about.css";
---

<BaseLayout
    title="Dongwook Kim"
    description="About Dongwook Kim - Junior Embedded Developer"
>
    <div class="stack gap-20">
        <main class="wrapper about">
            <Hero title="Robotics" />
            <div style={{ margin: "4.5rem 0" }}></div>
            <section>
                <h2 class="section-title">제작한 ROS2 패키지</h2>
                <br />
                <div class="content">
                    <div class="package-container">
                        <div class="package-item">
                            <div class="package-header">
                                <h3 class="package-title">라이다 2개 레이저로 뿌리는 패키지</h3>
                                <div class="package-tags">
                                    <span class="tag">ROS2</span>
                                    <span class="tag">Python</span>
                                    <span class="tag">C++</span>
                                </div>
                            </div>
                            <div class="package-content">
                                <div class="package-media">
                                    <img src="/assets/images/robotics/lidar-spray.jpg" alt="라이다 스프레이 패키지 이미지">
                                </div>
                                <div class="package-info">
                                    <div class="info-section">
                                        <h4>주요 기능</h4>
                                        <ul>
                                            <li>이중 라이다 센서 통합</li>
                                            <li>레이저 스프레이 제어</li>
                                            <li>실시간 데이터 처리</li>
                                        </ul>
                                    </div>
                                    <div class="info-section">
                                        <h4>개발 기간</h4>
                                        <p>2024.03 ~ 2024.04</p>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <div class="package-item">
                            <div class="package-header">
                                <h3 class="package-title">라이다 2개 융합하는 패키지</h3>
                                <div class="package-tags">
                                    <span class="tag">ROS2</span>
                                    <span class="tag">PCL</span>
                                    <span class="tag">C++</span>
                                </div>
                            </div>
                            <div class="package-content">
                                <div class="package-media">
                                    <img src="/assets/images/robotics/lidar-fusion.jpg" alt="라이다 융합 패키지 이미지">
                                </div>
                                <div class="package-info">
                                    <div class="info-section">
                                        <h4>주요 기능</h4>
                                        <ul>
                                            <li>이중 라이다 데이터 동기화</li>
                                            <li>포인트 클라우드 융합</li>
                                            <li>노이즈 필터링</li>
                                        </ul>
                                    </div>
                                    <div class="info-section">
                                        <h4>개발 기간</h4>
                                        <p>2024.04 ~ 2024.05</p>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </section>
        </main>

        <ContactCTA />
    </div>
</BaseLayout>

<script>
    function toggleProblems(id: string) {
        const problemList = document.getElementById(id);
        if (!problemList) return;

        const button = problemList.previousElementSibling as HTMLButtonElement;
        const arrow = button.querySelector(".arrow");

        problemList.classList.toggle("active");
        arrow?.classList.toggle("active");

        // 각 li 요소에 인덱스 설정
        problemList.querySelectorAll("li").forEach((li, index) => {
            li.style.setProperty("--item-index", index.toString());
        });
    }

    // 이벤트 위임을 사용하여 토글 버튼 클릭 처리
    document.addEventListener("click", (e) => {
        const target = e.target as HTMLElement;
        const toggleBtn = target.closest(".toggle-btn");

        if (toggleBtn) {
            const id = toggleBtn.getAttribute("data-id");
            if (id) toggleProblems(id);
        }
    });
</script>

<style>
    .package-container {
        max-width: 1000px;
        margin: 0;
        display: flex;
        flex-direction: column;
        gap: 3rem;
        padding: 0 1rem;
    }

    .package-item {
        background: var(--gray-800);
        border-radius: 1rem;
        overflow: hidden;
        transition: transform 0.3s ease;
        width: 100%;
    }

    .package-item:hover {
        transform: translateY(-5px);
    }

    .package-header {
        padding: 2rem;
        border-bottom: 1px solid var(--gray-700);
    }

    .package-title {
        font-size: 1.8rem;
        color: var(--gray-0);
        margin-bottom: 1rem;
        font-weight: 600;
    }

    .package-tags {
        display: flex;
        gap: 0.8rem;
        flex-wrap: wrap;
    }

    .tag {
        background: var(--gray-700);
        color: var(--gray-0);
        padding: 0.4rem 1rem;
        border-radius: 2rem;
        font-size: 0.9rem;
        font-weight: 500;
    }

    .package-content {
        display: flex;
        gap: 3rem;
        padding: 2rem;
    }

    .package-media {
        flex: 1.5;
        min-width: 300px;
        max-width: 700px;
    }

    .package-media img {
        width: 100%;
        height: auto;
        border-radius: 0.5rem;
        object-fit: cover;
    }

    .package-info {
        flex: 0.7;
        display: flex;
        flex-direction: column;
        gap: 2rem;
    }

    .info-section h4 {
        color: var(--gray-0);
        font-size: 1.2rem;
        margin-bottom: 1rem;
        font-weight: 600;
    }

    .info-section ul {
        list-style-type: disc;
        padding-left: 1.5rem;
        color: var(--gray-300);
    }

    .info-section li {
        margin-bottom: 0.5rem;
        line-height: 1.5;
    }

    .info-section p {
        color: var(--gray-300);
        line-height: 1.5;
    }

    @media (max-width: 768px) {
        .package-content {
            flex-direction: column;
            padding: 1.5rem;
            gap: 2rem;
        }

        .package-header {
            padding: 1.5rem;
        }

        .package-title {
            font-size: 1.5rem;
        }

        .package-media {
            min-width: 100%;
            max-width: none;
        }

        .package-info {
            flex: 1;
        }
    }
</style>

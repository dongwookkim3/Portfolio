---
import BaseLayout from "../layouts/BaseLayout.astro";
import ContactCTA from "../components/ContactCTA.astro";
import Hero from "../components/Hero.astro";
import CertSection from "../components/CertSection.astro";
import { careerData } from "../data/career";
import { educationData } from "../data/education";
import { certificateData } from "../data/certificates";
import { achievementsData } from "../data/achievements";
import { pageTitle, siteConfig } from "../data/site";
import "../styles/about.css";
---

<BaseLayout
    title={pageTitle('About')}
    description="About Dongwook Kim - Robot Developer"
>
    <div class="stack gap-20">
        <main class="wrapper about">
            <Hero title="About Me">
                <b>
                    <span style="display: inline;">
                        하드웨어와 소프트웨어를 연결하는 로봇 개발자,
                        <a
                            href={siteConfig.github}
                            target="_blank"
                            rel="noopener"
                            class="no-underline"
                        >김동욱</a>입니다.
                    </span>
                </b>
            </Hero>

            <!-- Career -->
            <section>
                <h2 class="section-title">Career</h2>
                <div class="content">
                    {careerData.map((career) => (
                        <div class="education-item">
                            <h3>{career.company}</h3>
                            <ul class="education-details">
                                <li>{career.position}</li>
                                <li>{career.period}</li>
                                <li>{career.description}</li>
                            </ul>
                            {career.tasks && career.tasks.length > 0 && (
                                <ul class="task-list">
                                    {career.tasks.map((task) => (
                                        <li>{task}</li>
                                    ))}
                                </ul>
                            )}
                            {career.techStack && career.techStack.length > 0 && (
                                <div class="tech-tags">
                                    {career.techStack.map((tech) => (
                                        <span class="tech-tag">{tech}</span>
                                    ))}
                                </div>
                            )}
                        </div>
                    ))}
                </div>
            </section>

            <!-- Education -->
            <section>
                <h2 class="section-title">Education</h2>
                <div class="content">
                    {educationData.map((edu) => (
                        <div class="education-item">
                            <h3>{edu.school}</h3>
                            <ul class="education-details">
                                <li>{edu.period}</li>
                                {edu.department && <li>{edu.department}</li>}
                            </ul>
                            <div class="edu-links">
                                {edu.certificate_pdf_ko && (
                                    <div class="tab-container">
                                        <a href={edu.certificate_pdf_ko} target="_blank" rel="noopener" class="tab-link">
                                            증명서 (KOR)
                                        </a>
                                    </div>
                                )}
                                {edu.certificate_pdf_en && (
                                    <div class="tab-container">
                                        <a href={edu.certificate_pdf_en} target="_blank" rel="noopener" class="tab-link">
                                            증명서 (ENG)
                                        </a>
                                    </div>
                                )}
                                {edu.certificate_web && (
                                    <div class="tab-container">
                                        <a href={edu.certificate_web} target="_blank" rel="noopener" class="tab-link">
                                            증명서 (Web)
                                        </a>
                                    </div>
                                )}
                                {edu.good && (
                                    <div class="tab-container">
                                        <a href={edu.good} target="_blank" rel="noopener" class="tab-link">
                                            장학증서 (KOR)
                                        </a>
                                    </div>
                                )}
                            </div>
                        </div>
                    ))}
                </div>
            </section>

            <!-- Certificate -->
            <section>
                <h2 class="section-title">Certificate</h2>
                <div class="content">
                    <CertSection title="국가기술자격" certs={certificateData.national} />
                    <CertSection title="국가전문자격" certs={certificateData.specialty} />
                    <CertSection title="민간자격" certs={certificateData.private} />
                </div>
            </section>

            <!-- Achievements -->
            <section>
                <h2 class="section-title">Achievements</h2>
                <div class="content">
                    <div class="achievements-list">
                        {achievementsData.map((award) => (
                            <div class="achievement-card">
                                <h3 class="achievement-title">{award.title}</h3>
                                <p class="achievement-date">{award.date}</p>
                                <p class="achievement-award">{award.award}</p>
                                {award.isTeam && (
                                    <div class="team-section">
                                        <p class="team-detail">{award.teamDetail}</p>
                                        <ul class="team-list">
                                            {award.team?.map((member) => (
                                                <li>{member}</li>
                                            ))}
                                        </ul>
                                    </div>
                                )}
                                {award.certificate_pdf_ko && (
                                    <div class="tab-container">
                                        <a href={award.certificate_pdf_ko} target="_blank" rel="noopener" class="tab-link">
                                            증명서 보기
                                        </a>
                                    </div>
                                )}
                                {award.certificate_pdf_ko2 && (
                                    <div class="tab-container">
                                        <a href={award.certificate_pdf_ko2} target="_blank" rel="noopener" class="tab-link">
                                            증명서 보기
                                        </a>
                                    </div>
                                )}
                            </div>
                        ))}
                    </div>
                </div>
            </section>
        </main>

        <ContactCTA />
    </div>
</BaseLayout>

<style>
    .no-underline {
        text-decoration: none;
    }

    .no-underline:hover {
        color: var(--accent-regular);
    }

    .tab-container {
        display: flex;
        margin: 0.2rem 0 0.3rem 0;
    }

    .tab-link {
        display: inline-block;
        padding: 0.3rem 0.6rem;
        background-color: var(--gray-999);
        font-weight: 600;
        text-decoration: none;
        border-radius: 4px;
        transition: none;
    }

    .tab-link:hover {
        color: var(--accent-regular);
    }

    .cert-container {
        display: flex;
        flex-direction: column;
        gap: 1rem;
        margin-top: 1rem;
    }

    .cert-item {
        display: flex;
        flex-direction: column;
    }

    /* ─── Career ──────────────────────── */
    .task-list {
        list-style: disc;
        padding-left: 1.5rem;
        margin-top: 0.5rem;
        color: var(--gray-300);
    }

    .task-list li {
        margin-bottom: 0.25rem;
        font-size: var(--text-sm);
    }

    .tech-tags {
        display: flex;
        flex-wrap: wrap;
        gap: 0.5rem;
        margin-top: 0.75rem;
    }

    .tech-tag {
        padding: 0.2rem 0.6rem;
        font-size: var(--text-sm);
        border: 1px solid var(--gray-800);
        border-radius: 999rem;
        color: var(--accent-regular);
        background-color: var(--gray-999_40);
    }

    /* ─── Achievements ────────────────── */
    .achievements-list {
        display: grid;
        grid-template-columns: repeat(2, 1fr);
        gap: 1.5rem;
    }

    @media (max-width: 50em) {
        .achievements-list {
            grid-template-columns: 1fr;
        }
    }

    .achievement-card {
        padding: 1.5rem;
        background: var(--gradient-subtle);
        border: 1px solid var(--gray-800);
        border-radius: 1rem;
    }

    .achievement-title {
        font-size: var(--text-base) !important;
        color: var(--gray-0);
        margin-bottom: 0.25rem;
    }

    .achievement-date {
        font-size: var(--text-sm);
        color: var(--accent-regular);
        margin: 0.25rem 0;
    }

    .achievement-award {
        font-size: var(--text-sm);
        color: var(--gray-300);
        margin: 0.25rem 0;
    }

    .team-section {
        margin-top: 0.5rem;
    }

    .team-detail {
        font-size: var(--text-sm);
        color: var(--accent-regular);
        margin: 0;
    }

    .team-list {
        padding: 0.5rem 0 0 1.5rem;
        margin: 0;
        list-style: disc;
        color: var(--gray-400);
        font-size: var(--text-sm);
    }
</style>
